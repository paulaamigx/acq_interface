{"ast":null,"code":"var _jsxFileName = \"/home/paula/Documents/Practica/git/user_interface/src/components/InferenceUI/SidePanel/SidePanel.js\";\nimport ConfigTab from './Conf/ConfTab.js';\nimport DiagnosisTab from './Diagnosis/Diagnosis.js';\nimport './SidePanelWrapper.css';\nimport './Conf/ConfTab.css';\nimport './Results/ResultsTab.css';\nimport { Button } from 'reactstrap';\nimport React, { useState } from 'react';\nimport { listDevices, setGallery2, galleryPrev, galleryNext, removeAllImgBorders } from './functions.js';\nimport { getSysDetails } from './getNavDetais.js';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport logoDownload from './Results/download.png';\nimport logoTrash from './Results/trash.png'; //import logoTick from './tick.png'\n\nimport frame138 from './Diagnosis/MaterialDiagnostico/frame138.png';\nimport frame302 from './Diagnosis/MaterialDiagnostico/frame302.png';\nimport frame1282 from './Diagnosis/MaterialDiagnostico/frame1282.png'; //import pdf from './sample.pdf'\n//import iconHidePanel from './hidePanel.png'\n\nimport iconShowPanel from './showPanel.png'; //import iconError from './error.png'\n\nimport \"jspdf/dist/polyfills.es.js\";\n\nclass SidePanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showDiagnosisImg: false,\n      diagnosisImgOnModal: 0\n    };\n    this.pdfSrc = null;\n    this.diagnosisImgs = [[frame138, 'Diagnostico 1'], [frame302, 'Diagnostico 2'], [frame1282, 'Diagnostico 3'], [frame302, 'Diagnostico 4'], [frame138, 'Diagnostico 5']];\n    this.diagnosisIndex = 0;\n  }\n\n  downloadHandler(media) {\n    this.props.downloadHandler(media);\n  }\n\n  listDevices() {\n    listDevices();\n  }\n\n  setGallery2() {\n    setGallery2(this.props);\n  }\n\n  componentDidMount() {\n    listDevices();\n    document.getElementById(\"countdownFromInput\").value = \"1\";\n    changeTab(1, this.props.setTabOn, this.props.currentState);\n  }\n\n  saveCanvasDim(w, h) {\n    this.props.saveCanvasDim(w, h);\n  }\n\n  getCanvasDim() {\n    return this.props.getCanvasDim();\n  }\n\n  galleryCtrl(dir, galleryIndxSh, gallerySrc, newPhoto, selectedPhoto) {\n    if (dir.localeCompare('prev') === 0) {\n      galleryPrev(galleryIndxSh, gallerySrc, newPhoto, selectedPhoto);\n    } else if (dir.localeCompare('next') === 0) {\n      galleryNext(galleryIndxSh, gallerySrc, newPhoto, selectedPhoto);\n    }\n  }\n\n  hideSidePanel() {\n    hideSidePanel(this);\n  }\n\n  setDiagnosisImgOnModal(value) {\n    this.setState({\n      diagnosisImgOnModal: value\n    });\n  }\n\n  setShowDiagnosisImg(value, indx) {\n    //areglar\n    this.superElement.setState({\n      showDiagnosisImg: value\n    }, () => {\n      if (value) {\n        document.getElementById('d_modalImg').src = document.getElementById('diagnosisImg' + indx).src;\n        document.getElementById('d_modalImgTag').innerHTML = document.getElementById('d_ImgTag' + indx).innerHTML;\n      }\n    });\n    this.setDiagnosisImgOnModal(indx);\n  }\n\n  setPdfSrc(pdf) {\n    console.log('setpdf');\n    this.pdfSrc = pdf;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 4\n      }\n    }, !this.props.currentState.hideSidePanel && /*#__PURE__*/React.createElement(\"div\", {\n      id: \"sidePanel_Wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      tabOn: this.props.currentState.tabOn,\n      currentState: this.props.currentState,\n      setTabOn: this.props.setTabOn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(TabsBody, {\n      downloadHandler: media => this.downloadHandler(media),\n      currentState: this.props.currentState,\n      gallerySrc: this.props.gallerySrc,\n      setGalleryIndxShowing: this.props.setGalleryIndxShowing,\n      setSelectedGalleryPhoto: this.props.setSelectedGalleryPhoto,\n      selectedGalleryPhoto: this.props.currentState.selectedGalleryPhoto,\n      superElement: this,\n      showDiagnosisImg: this.state.showDiagnosisImg,\n      setShowDiagnosisImg: this.setShowDiagnosisImg,\n      pdfSrc: this.pdfSrc,\n      setPdfSrc: pdf => this.setPdfSrc(pdf),\n      diagnosisImgOnModal: this.state.diagnosisImgOnModal,\n      setDiagnosisImgOnModal: value => this.setDiagnosisImgOnModal(value),\n      diagnosisImgs: this.diagnosisImgs,\n      diagnosisIndex: this.diagnosisIndex,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(ModalError, {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    })), this.props.currentState.hideSidePanel && /*#__PURE__*/React.createElement(\"div\", {\n      id: \"showSidePanel\",\n      onClick: () => {\n        showSidePanel(this);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: \"iconShowPanel\",\n      src: iconShowPanel,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nfunction TabsBody(props) {\n  if (props.currentState.tabOn === 1) {\n    return /*#__PURE__*/React.createElement(ConfigTab, {\n      superElement: props.superElement,\n      className: \"tabBody\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 4\n      }\n    });\n  } else if (props.currentState.tabOn === 2) {\n    return /*#__PURE__*/React.createElement(GalleryTab, {\n      gallerySrc: props.gallerySrc,\n      galleryIndxSh: props.currentState.GalleryIndexShowing,\n      setGalleryIndxShowing: props.setGalleryIndxShowing,\n      setSelectedGalleryPhoto: props.setSelectedGalleryPhoto,\n      selectedPhoto: props.currentState.selectedGalleryPhoto,\n      downloadHandler: props.downloadHandler,\n      selectedGalleryPhoto: props.selectedGalleryPhoto,\n      currentStateName: props.currentState.stateName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 7\n      }\n    });\n  } else if (props.currentState.tabOn === 3) {\n    return /*#__PURE__*/React.createElement(DiagnosisTab, {\n      superElement: props.superElement,\n      showDiagnosisImg: props.showDiagnosisImg,\n      setShowDiagnosisImg: props.setShowDiagnosisImg,\n      setPdfSrc: props.setPdfSrc,\n      diagnosisImgOnModal: props.diagnosisImgOnModal,\n      setDiagnosisImgOnModal: props.setDiagnosisImgOnModal,\n      diagnosisImgs: props.diagnosisImgs,\n      diagnosisIndex: props.diagnosisIndex,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 7\n      }\n    });\n  } else if (props.currentState.tabOn === 4) {\n    return /*#__PURE__*/React.createElement(ReportTab, {\n      className: \"tabBody\",\n      pdfSrc: props.pdfSrc,\n      setPdfSrc: props.setPdfSrc,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 7\n      }\n    });\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }\n    }, \"Error\"));\n  }\n}\n\nfunction Tabs(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"tabs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"confTab\",\n    className: \"tab\",\n    onClick: () => changeTab(1, props.setTabOn, props.currentState),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-cog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"galleryTab\",\n    className: \"tab\",\n    onClick: () => changeTab(2, props.setTabOn, props.currentState),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, \"Resultados de  Examinaci\\xF3n\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"resultsTab\",\n    className: \"tab\",\n    onClick: () => changeTab(3, props.setTabOn, props.currentState),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, \"Diagn\\xF3stico\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"reportTab\",\n    className: \"tab\",\n    onClick: () => changeTab(4, props.setTabOn, props.currentState),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }, \"Informe M\\xE9dico\"));\n}\n\nfunction changeTab(n, setTabOn, state) {\n  if (state.tabsEnabled[n - 1]) {\n    setTabOn(n);\n  }\n}\n\nfunction GalleryTab(props) {\n  let galleryIndxSh = props.galleryIndxSh;\n  let mapKeys = Array.from(props.gallerySrc.keys());\n  let isEmpty = galleryIndxSh[0] === 0 ? true : false;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tabBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"galleryPrev\",\n    className: \"button\",\n    href: \"galleryPrev\",\n    onClick: () => {\n      props.setGalleryIndxShowing([galleryIndxSh[0], galleryIndxSh[1], mapKeys[mapKeys.indexOf(galleryIndxSh[0]) - 1]], [1, 2, 0], false, 'prev');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"galleryNext\",\n    className: \"button\",\n    onClick: () => {\n      props.setGalleryIndxShowing([galleryIndxSh[1], galleryIndxSh[2], mapKeys[mapKeys.indexOf(galleryIndxSh[2]) + 1]], [0, 1, 2], false, 'next');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"downloadBG\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"downloadAll\",\n    className: \"download button\",\n    onClick: () => {\n      if (props.currentStateName.localeCompare('Review') === 0 && props.gallerySrc.size > 0) props.downloadHandler(\"all\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoDownload,\n    alt: \"\",\n    className: \"downloadLogo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"downloadTag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 15\n    }\n  }, \"Descargar fotos y video\")), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"downloadPhotos\",\n    className: \"download button\",\n    onClick: () => {\n      if (props.currentStateName.localeCompare('Review') === 0 && props.gallerySrc.size > 0) props.downloadHandler(\"screenshots\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoDownload,\n    alt: \"\",\n    className: \"downloadLogo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"downloadTag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 15\n    }\n  }, \"Descargar fotos\")), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"downloadVideo\",\n    className: \"download button\",\n    onClick: () => {\n      if (props.currentStateName.localeCompare('Review') === 0) props.downloadHandler(\"video\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoDownload,\n    alt: \"\",\n    className: \"downloadLogo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"downloadTag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 15\n    }\n  }, \"Descargar video\"))), !isEmpty && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"deletePhoto\",\n    className: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoTrash,\n    alt: \"\",\n    id: \"logoCtrlPhoto\",\n    onClick: () => deletePhoto(props.gallerySrc, props.selectedGalleryPhoto, props.galleryIndxSh, props.setGalleryIndxShowing, props.setSelectedGalleryPhoto),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 11\n    }\n  }))), isEmpty && /*#__PURE__*/React.createElement(\"div\", {\n    id: \"divNoPhoto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"divNoPhotoInside\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 11\n    }\n  }, \"No se encuentran fotos disponibles.\")), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"\",\n    id: \"img1\",\n    alt: \"\",\n    onClick: () => {\n      clickOnImage(1);\n      props.setSelectedGalleryPhoto(galleryIndxSh[0]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"\",\n    id: \"img2\",\n    alt: \"\",\n    onClick: () => {\n      clickOnImage(2);\n      props.setSelectedGalleryPhoto(galleryIndxSh[1]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"\",\n    id: \"img3\",\n    alt: \"\",\n    onClick: () => {\n      clickOnImage(3);\n      props.setSelectedGalleryPhoto(galleryIndxSh[2]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    id: \"displayedImg\",\n    src: props.gallerySrc.get(props.selectedPhoto),\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }\n  }));\n}\n\nasync function deletePhoto(gallerySrc, selected, galleryIndxSh, setGalleryIndxSh, setSelectedPhoto) {\n  let newKeysArr = [0, 0, 0];\n\n  for (let i = 0; i < galleryIndxSh.length; i++) {\n    if (galleryIndxSh[i] === selected) {\n      let mapKeys = Array.from(gallerySrc.keys());\n      let indx = mapKeys.indexOf(selected);\n\n      for (let j = 0; j < galleryIndxSh.length - i; j++) {\n        if (mapKeys.length <= indx + 1 + j) {\n          newKeysArr[j + i] = 0;\n        } else {\n          newKeysArr[j + i] = mapKeys[indx + 1 + j];\n        }\n      }\n\n      if (i === 0) {\n        if (newKeysArr[0] === 0) {\n          if (mapKeys[indx - 1]) {\n            document.getElementById('galleryPrev').click();\n            newKeysArr[0] = mapKeys[indx - 1];\n          } else {}\n        }\n\n        setSelectedPhoto(newKeysArr[0]);\n        await sleep(200);\n        clickOnImage(1);\n      } else {\n        setSelectedPhoto(newKeysArr[i - 1]);\n        clickOnImage(i);\n      }\n\n      break;\n    } else {\n      newKeysArr[i] = galleryIndxSh[i];\n    }\n  }\n\n  if (newKeysArr[0] === 0) removeAllImgBorders();\n  gallerySrc.delete(selected);\n  setGalleryIndxSh(newKeysArr, [0, 1, 2], false, 'delete');\n}\n\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction ReportTab(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tabBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"embed\", {\n    id: \"pdf\",\n    src: props.pdfSrc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }\n  }));\n}\n\nfunction clickOnImage(number) {\n  for (let i = 1; i <= 3; i++) {\n    let name = 'img'.concat(i);\n\n    if (i !== number) {\n      document.getElementById(name).style.borderStyle = 'none';\n      document.getElementById(name).style.top = '1.8vw';\n      document.getElementById(name).style.width = '10vw';\n      document.getElementById(name).style.left = 5 + (i - 1) * 11 + 'vw';\n    } else {\n      document.getElementById(name).style.border = '0.5vw solid #021a40';\n      document.getElementById(name).style.top = '1.3vw';\n      document.getElementById(name).style.width = '11vw';\n      document.getElementById(name).style.left = 5 + (i - 1) * 11 - 0.5 + 'vw';\n    }\n  }\n}\n\nfunction hideSidePanel(el) {\n  el.props.setHideSidePanel(true);\n  if (!el.props.currentState.stateName.localeCompare('Idle')) el.props.setCountdownFrom(parseInt(document.getElementById(\"countdownFromInput\").value));\n  let div = document.getElementById(\"canvasDiv\");\n  let btns = document.getElementById(\"buttons\");\n  let canvas = document.getElementById(\"canvasPreview\");\n  el.canvasHeight = div.clientHeight * 100 / window.innerWidth; //vw\n\n  el.canvasWidth = div.clientWidth * 100 / window.innerWidth; //vw\n\n  document.getElementById(\"WebcamStream_Wrapper\").style.width = \"100vw\";\n\n  if (87 * el.canvasWidth / el.canvasHeight * window.innerHeight / 100 < window.innerWidth) {\n    div.style.height = \"87vh\";\n    div.style.width = 87 * el.canvasWidth / el.canvasHeight + \"vh\";\n  } else {\n    div.style.width = \"90vw\";\n    div.style.height = 90 * el.canvasHeight / el.canvasWidth + \"vw\";\n  }\n\n  btns.style.width = div.clientWidth * 100 / window.innerWidth + \"vw\";\n  btns.style.top = (div.clientHeight - btns.clientHeight) * 100 / window.innerHeight + \"vh\";\n  div.style.marginLeft = (100 - div.clientWidth * 100 / window.innerWidth) / 2 + \"vw\";\n  canvas.style.height = \"100%\";\n  canvas.style.width = \"100%\";\n  btns.style.top = (div.clientHeight - btns.clientHeight) * 100 / window.innerHeight + \"vh\";\n  btns.style.opacity = 0;\n  canvas.addEventListener(\"mouseover\", showButtons, false);\n  btns.addEventListener(\"mouseover\", showButtons, false);\n  canvas.addEventListener(\"mouseout\", hideButtons, false);\n  document.getElementById(\"container\").style.paddingTop = \"2vh\";\n}\n\nfunction showSidePanel(el) {\n  el.props.setHideSidePanel(false);\n  document.getElementById(\"WebcamStream_Wrapper\").style.width = \"55vw\";\n  let btns = document.getElementById(\"buttons\");\n  let div = document.getElementById(\"canvasDiv\");\n  let canvas = document.getElementById(\"canvasPreview\");\n  div.style.width = el.canvasWidth + \"vw\";\n  div.style.height = el.canvasHeight + \"vw\";\n  canvas.style.width = \"100%\";\n  canvas.style.height = \"100%\";\n  div.style.marginLeft = \"2.5vw\";\n  div.style.marginRight = \"2.5vw\";\n  btns.style.width = \"50vw\";\n  btns.style.top = el.canvasHeight + \"vw\";\n  btns.style.opacity = 1;\n  canvas.removeEventListener(\"mouseover\", showButtons, false);\n  btns.removeEventListener(\"mouseover\", showButtons, false);\n  canvas.removeEventListener(\"mouseout\", hideButtons, false);\n  setTimeout(function () {\n    if (document.getElementById(\"countdownFromInput\")) {\n      document.getElementById(\"countdownFromInput\").value = el.props.countdownFrom;\n      listDevices();\n    }\n  }, 100);\n  document.getElementById(\"container\").style.paddingTop = \"4vh\";\n}\n\nfunction showButtons() {\n  var btns = document.getElementById(\"buttons\");\n\n  if (btns) {\n    btns.style.opacity = 0.7;\n  }\n}\n\nfunction hideButtons() {\n  var btns = document.getElementById(\"buttons\");\n\n  if (btns) {\n    btns.style.opacity = 0;\n  }\n}\n\nconst ModalError = props => {\n  const {\n    className\n  } = props;\n  const [modal, setModal] = useState(false);\n\n  const toggle = () => setModal(!modal);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"modalBtn\",\n    className: \"button\",\n    onClick: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 7\n    }\n  }, \"Error\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modal,\n    toggle: toggle,\n    className: className,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 9\n    }\n  }, \"Reporte de errores\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 6\n    }\n  }, \"\\xBFQu\\xE9 pas\\xF3?\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"ErrorBox\",\n    cols: \"40\",\n    rows: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: getSysDetails,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 11\n    }\n  }, \"Descargar\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 11\n    }\n  }, \"Cerrar\"))));\n};\n\nexport default SidePanel;","map":{"version":3,"sources":["/home/paula/Documents/Practica/git/user_interface/src/components/InferenceUI/SidePanel/SidePanel.js"],"names":["ConfigTab","DiagnosisTab","Button","React","useState","listDevices","setGallery2","galleryPrev","galleryNext","removeAllImgBorders","getSysDetails","Modal","ModalHeader","ModalBody","ModalFooter","logoDownload","logoTrash","frame138","frame302","frame1282","iconShowPanel","SidePanel","Component","constructor","props","state","showDiagnosisImg","diagnosisImgOnModal","pdfSrc","diagnosisImgs","diagnosisIndex","downloadHandler","media","componentDidMount","document","getElementById","value","changeTab","setTabOn","currentState","saveCanvasDim","w","h","getCanvasDim","galleryCtrl","dir","galleryIndxSh","gallerySrc","newPhoto","selectedPhoto","localeCompare","hideSidePanel","setDiagnosisImgOnModal","setState","setShowDiagnosisImg","indx","superElement","src","innerHTML","setPdfSrc","pdf","console","log","render","tabOn","setGalleryIndxShowing","setSelectedGalleryPhoto","selectedGalleryPhoto","showSidePanel","TabsBody","GalleryIndexShowing","stateName","Tabs","n","tabsEnabled","GalleryTab","mapKeys","Array","from","keys","isEmpty","indexOf","currentStateName","size","deletePhoto","clickOnImage","get","selected","setGalleryIndxSh","setSelectedPhoto","newKeysArr","i","length","j","click","sleep","delete","ms","Promise","resolve","setTimeout","ReportTab","number","name","concat","style","borderStyle","top","width","left","border","el","setHideSidePanel","setCountdownFrom","parseInt","div","btns","canvas","canvasHeight","clientHeight","window","innerWidth","canvasWidth","clientWidth","innerHeight","height","marginLeft","opacity","addEventListener","showButtons","hideButtons","paddingTop","marginRight","removeEventListener","countdownFrom","ModalError","className","modal","setModal","toggle"],"mappings":"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","sourcesContent":["import ConfigTab from './Conf/ConfTab.js'\nimport DiagnosisTab from './Diagnosis/Diagnosis.js'\nimport './SidePanelWrapper.css'\nimport './Conf/ConfTab.css'\nimport './Results/ResultsTab.css'\nimport { Button } from 'reactstrap';\nimport React, {useState} from 'react';\nimport {listDevices, setGallery2, galleryPrev, galleryNext, removeAllImgBorders} from './functions.js'\nimport {getSysDetails} from './getNavDetais.js'\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nimport logoDownload from './Results/download.png' \n\nimport logoTrash from './Results/trash.png'\n//import logoTick from './tick.png'\nimport frame138 from './Diagnosis/MaterialDiagnostico/frame138.png'\nimport frame302 from './Diagnosis/MaterialDiagnostico/frame302.png'\nimport frame1282 from './Diagnosis/MaterialDiagnostico/frame1282.png'\n//import pdf from './sample.pdf'\n//import iconHidePanel from './hidePanel.png'\nimport iconShowPanel from './showPanel.png'\n//import iconError from './error.png'\nimport \"jspdf/dist/polyfills.es.js\";\nclass SidePanel extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n      showDiagnosisImg: false,\n      diagnosisImgOnModal: 0\n\t\t}\n    this.pdfSrc=null;\n    this.diagnosisImgs = [[frame138,'Diagnostico 1'],[frame302,'Diagnostico 2'],[frame1282,'Diagnostico 3'],[frame302,'Diagnostico 4'],[frame138,'Diagnostico 5']];\n    this.diagnosisIndex = 0;\n\t}\n  downloadHandler(media){\n    this.props.downloadHandler(media);\n  }\n\n  listDevices(){\n    listDevices();\n  }\n  setGallery2(){\n    setGallery2(this.props);\n  }\n  componentDidMount(){\n    listDevices();\n    document.getElementById(\"countdownFromInput\").value=\"1\";\n    changeTab(1, this.props.setTabOn, this.props.currentState);\n  }\n  saveCanvasDim(w,h){\n    this.props.saveCanvasDim(w,h);\n  }\n  getCanvasDim(){\n    return this.props.getCanvasDim();\n  }\n  \n  galleryCtrl(dir, galleryIndxSh, gallerySrc, newPhoto, selectedPhoto){\n    if(dir.localeCompare('prev') === 0){\n      galleryPrev(galleryIndxSh, gallerySrc, newPhoto, selectedPhoto);\n    }\n    else if(dir.localeCompare('next') === 0){\n      galleryNext(galleryIndxSh, gallerySrc, newPhoto, selectedPhoto);\n    }\n  }\n  hideSidePanel(){\n    hideSidePanel(this);\n  }\n  setDiagnosisImgOnModal(value){\n    this.setState({diagnosisImgOnModal: value});\n  }\n  setShowDiagnosisImg(value,indx){\n    //areglar\n    this.superElement.setState({showDiagnosisImg: value},()=>{\n      if(value){\n        document.getElementById('d_modalImg').src = document.getElementById('diagnosisImg'+indx).src;\n        document.getElementById('d_modalImgTag').innerHTML = document.getElementById('d_ImgTag'+indx).innerHTML;\n      }\n    });\n    this.setDiagnosisImgOnModal(indx);\n  }\n  setPdfSrc(pdf){\n    console.log('setpdf');\n    this.pdfSrc=pdf;\n  }\n  render(){\n\t\treturn(\n\t\t\t<div>\n        {!this.props.currentState.hideSidePanel && \n\t\t\t    <div id=\"sidePanel_Wrapper\">\n            <Tabs tabOn={this.props.currentState.tabOn}\n                 \tcurrentState={this.props.currentState}\n                  setTabOn={this.props.setTabOn}\n                  \n            />\n\t\t\t\t    <TabsBody\n                 \t\tdownloadHandler={(media)=> this.downloadHandler(media)}\n                 \t\tcurrentState={this.props.currentState}\n                    gallerySrc={this.props.gallerySrc}\n                    setGalleryIndxShowing={this.props.setGalleryIndxShowing}\n                    setSelectedGalleryPhoto={this.props.setSelectedGalleryPhoto}\n                    selectedGalleryPhoto = {this.props.currentState.selectedGalleryPhoto}\n\t\t\t\t\t\t\t\t\t\tsuperElement={this}\n                    showDiagnosisImg = {this.state.showDiagnosisImg}\n                    setShowDiagnosisImg = {this.setShowDiagnosisImg}\n                    pdfSrc={this.pdfSrc}\n                    setPdfSrc={(pdf)=>this.setPdfSrc(pdf)}\n                    diagnosisImgOnModal={this.state.diagnosisImgOnModal}\n                    setDiagnosisImgOnModal={(value)=>this.setDiagnosisImgOnModal(value)}\n                    diagnosisImgs={this.diagnosisImgs}\n                    diagnosisIndex={this.diagnosisIndex}\n            />\n\t\t\t\t\t\t<ModalError className=''/>\n\n            {/*!this.props.currentState.isVideoLoading  &&  this.props.currentState.renderCanvas &&\n              <div id=\"hideSidePanel\"  onClick={()=>this.hideSidePanel()}>\n                <img id='iconHidePanel' src={iconHidePanel} alt=''/>\n              </div>}\n              */}\n\t\t\t\t\t</div>}\n\n        {this.props.currentState.hideSidePanel && \n          <div id=\"showSidePanel\"  onClick={()=>{showSidePanel(this)}}>\n            <img id='iconShowPanel' src={iconShowPanel} alt=''/>\n          </div>\n        }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction TabsBody(props) {\n  if(props.currentState.tabOn === 1){\n    return(\n\t\t\t<ConfigTab superElement={props.superElement} className='tabBody'/>\n    );\n  }\n  else if(props.currentState.tabOn === 2){\n    return(\n      <GalleryTab gallerySrc={props.gallerySrc} \n                  galleryIndxSh={props.currentState.GalleryIndexShowing}\n                  setGalleryIndxShowing={props.setGalleryIndxShowing}\n                  setSelectedGalleryPhoto={props.setSelectedGalleryPhoto}\n                  selectedPhoto = {props.currentState.selectedGalleryPhoto}\n                  downloadHandler = {props.downloadHandler}\n                  selectedGalleryPhoto = {props.selectedGalleryPhoto}\n                  currentStateName= {props.currentState.stateName}\n                  />\n    );\n  }\n  else if(props.currentState.tabOn === 3){\n    return(\n      <DiagnosisTab superElement={props.superElement} \n                    showDiagnosisImg = {props.showDiagnosisImg}\n                    setShowDiagnosisImg = {props.setShowDiagnosisImg}\n                    setPdfSrc = {props.setPdfSrc}\n                    diagnosisImgOnModal={props.diagnosisImgOnModal}\n                    setDiagnosisImgOnModal={props.setDiagnosisImgOnModal}\n                    diagnosisImgs = {props.diagnosisImgs}\n                    diagnosisIndex = {props.diagnosisIndex}\n      />\n    );\n  }\n  else if(props.currentState.tabOn === 4){\n    return(\n      <ReportTab className='tabBody' pdfSrc={props.pdfSrc} setPdfSrc={props.setPdfSrc}/>\n    );\n  }\n  else{\n    return(\n      <div>\n      <p>Error</p>\n      </div>\n    );\n  }\n}\nfunction Tabs(props){\n  return(\n    <div id='tabs'>\n      <div id='confTab' className='tab' \n           onClick={()=>changeTab(1, props.setTabOn, props.currentState)}>\n        <i className=\"fas fa-cog\"></i>\n      </div>\n      <div id='galleryTab' className='tab'\n           onClick={()=>changeTab(2, props.setTabOn, props.currentState)}>\n        Resultados de  Examinación  \n      </div>\n      <div id='resultsTab' className='tab'\n           onClick={()=>changeTab(3, props.setTabOn, props.currentState)}>\n        Diagnóstico\n      </div>\n      <div id='reportTab' className='tab'\n           onClick={()=>changeTab(4, props.setTabOn, props.currentState)}>\n        Informe Médico\n      </div>\n    </div>\n  );\n}\nfunction changeTab(n, setTabOn,state){\n  if(state.tabsEnabled[n-1]){ \n    setTabOn(n);\n    \n  }\n}\n\nfunction GalleryTab(props){\n  let galleryIndxSh = props.galleryIndxSh;\n  let mapKeys = Array.from(props.gallerySrc.keys());\n  let isEmpty = (galleryIndxSh[0] === 0)? true:false;\n  return(\n    <div className = 'tabBody'>\n      <div id = 'galleryPrev' className='button' href='galleryPrev'\n            onClick = {()=>{props.setGalleryIndxShowing(\n                           [galleryIndxSh[0], galleryIndxSh[1], \n                           mapKeys[mapKeys.indexOf(galleryIndxSh[0])-1]],\n                    [1,2,0], false,'prev');}} />\n      <div id = 'galleryNext' className='button'\n           onClick = {()=>{props.setGalleryIndxShowing(\n                     [galleryIndxSh[1], galleryIndxSh[2], \n                      mapKeys[mapKeys.indexOf(galleryIndxSh[2])+1]],\n                    [0,1,2], false,'next')}} />\n      <div id='downloadBG'>\n        <div id = 'downloadAll' className= 'download button'\n              onClick={()=>{\n                if(props.currentStateName.localeCompare('Review') === 0 && props.gallerySrc.size>0)\n                  props.downloadHandler(\"all\")}}>\n              <img src={logoDownload} alt='' className='downloadLogo'/>\n              <div className='downloadTag'>\n              Descargar fotos y video\n              </div>\n        </div>\n        <div id = 'downloadPhotos' className= 'download button'\n              onClick={()=>{\n                if(props.currentStateName.localeCompare('Review') === 0 && props.gallerySrc.size > 0)\n                  props.downloadHandler(\"screenshots\")}}>\n              <img src={logoDownload} alt='' className='downloadLogo'/>\n              <div className='downloadTag'>\n              Descargar fotos \n              </div>\n        </div>\n        <div id = 'downloadVideo' className= 'download button'\n              onClick={()=>{\n                if(props.currentStateName.localeCompare('Review') === 0)\n                  props.downloadHandler(\"video\")}}>\n              <img src={logoDownload} alt='' className='downloadLogo'/>\n              <div className='downloadTag'>\n              Descargar video\n              </div>\n        </div>\n      </div>\n      {!isEmpty &&\n      <div >\n        <div id='deletePhoto' className='button'>\n          <img src={logoTrash} alt='' id='logoCtrlPhoto'\n               onClick={()=>deletePhoto(props.gallerySrc, props.selectedGalleryPhoto, props.galleryIndxSh,props.setGalleryIndxShowing, props.setSelectedGalleryPhoto)}\n          />\n        </div>\n        {/*\n        <div id='keepPhoto' className='button'>\n          <img src={logoTick} alt='' id='logoCtrlPhoto'/>\n        </div>*/\n        }\n      </div>\n      }\n\n      {isEmpty &&\n        <div id='divNoPhoto'>\n          <div id='divNoPhotoInside'>\n            No se encuentran fotos disponibles.\n          </div>\n        </div>\n      }\n      <img  src='' id= 'img1' alt='' \n            onClick={()=>{clickOnImage(1);\n                          props.setSelectedGalleryPhoto(galleryIndxSh[0]);\n            }}/> \n      <img  src='' id='img2' alt='' \n            onClick={()=>{clickOnImage(2) \n                          props.setSelectedGalleryPhoto(galleryIndxSh[1]);\n            }}/>\n      <img  src='' id='img3' alt='' \n            onClick={()=>{clickOnImage(3) \n                          props.setSelectedGalleryPhoto(galleryIndxSh[2]);\n            }}/>\n      <img id='displayedImg' src={props.gallerySrc.get(props.selectedPhoto)} alt=''/>\n      {/*\n\t\t\t<div id='errorBtn' className='button' onClick={()=>document.getElementById('modalBtn').click()}>\n\t\t\t\t<img id='iconError' src={iconError} alt=''/>\n\t\t\t</div>*/\n      }\n    </div>\n  );\n}\nasync function deletePhoto(gallerySrc, selected, galleryIndxSh, setGalleryIndxSh, setSelectedPhoto){\n  let newKeysArr = [0,0,0];\n  for (let i = 0; i < galleryIndxSh.length; i++){\n    if (galleryIndxSh[i] === selected){\n      let mapKeys = Array.from(gallerySrc.keys());\n      let indx = mapKeys.indexOf(selected);\n      for(let j =0; j < galleryIndxSh.length-i; j++){\n        if(mapKeys.length <= indx+1+j){\n          newKeysArr[j+i] = 0;\n        }\n        else{\n          newKeysArr[j+i] = mapKeys[indx+1+j];\n        }\n      }\n      if(i === 0){\n        if(newKeysArr[0] === 0){\n          if(mapKeys[indx-1]){\n            document.getElementById('galleryPrev').click();\n            newKeysArr[0] = mapKeys[indx-1];\n          }\n          else{\n          }\n        }\n        setSelectedPhoto(newKeysArr[0]);\n        await sleep(200);\n        clickOnImage(1);\n      }\n      else{\n        setSelectedPhoto(newKeysArr[i-1]);\n        clickOnImage(i);\n      }\n      break;\n    }\n    else{\n     newKeysArr[i] = galleryIndxSh[i]; \n    }\n  }\n  if(newKeysArr[0] === 0)\n    removeAllImgBorders();\n  gallerySrc.delete(selected);\n  setGalleryIndxSh(newKeysArr,[0,1,2],false,'delete');\n}\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\nfunction ReportTab(props){\n  return(\n    <div className='tabBody'>\n      <embed id='pdf' src={props.pdfSrc}/>\n    </div>\n  );\n}\n\nfunction clickOnImage(number){\n  for (let i=1; i <= 3; i++){\n    let name = 'img'.concat(i);\n    if (i !== number){\n      document.getElementById(name).style.borderStyle = 'none';\n      document.getElementById(name).style.top = '1.8vw';\n      document.getElementById(name).style.width = '10vw';\n      document.getElementById(name).style.left = 5 + (i-1)*11 + 'vw';\n    }\n    else{\n      document.getElementById(name).style.border= '0.5vw solid #021a40';\n      document.getElementById(name).style.top = '1.3vw';\n      document.getElementById(name).style.width = '11vw';\n      document.getElementById(name).style.left = 5 + (i-1)*11 - 0.5 + 'vw';\n       \n    }\n  }\n}\n\nfunction hideSidePanel(el){\n  el.props.setHideSidePanel(true);\n  if(!el.props.currentState.stateName.localeCompare('Idle'))\n    el.props.setCountdownFrom(parseInt(document.getElementById(\"countdownFromInput\").value));\n  let div = document.getElementById(\"canvasDiv\");\n  let btns = document.getElementById(\"buttons\");\n  let canvas = document.getElementById(\"canvasPreview\");\n  el.canvasHeight = div.clientHeight*100/window.innerWidth; //vw\n  el.canvasWidth = div.clientWidth*100/window.innerWidth; //vw\n  document.getElementById(\"WebcamStream_Wrapper\").style.width = \"100vw\";\n  if ((87*el.canvasWidth/el.canvasHeight)*window.innerHeight/100 < window.innerWidth){\n    div.style.height = \"87vh\";\n    div.style.width = 87*el.canvasWidth/el.canvasHeight+\"vh\";\n  }\n  else{\n    div.style.width = \"90vw\";\n    div.style.height = 90*el.canvasHeight/el.canvasWidth + \"vw\";\n  }\n \n  btns.style.width = div.clientWidth*100/window.innerWidth+\"vw\";\n  btns.style.top = (div.clientHeight - btns.clientHeight)*100/window.innerHeight + \"vh\";\n  div.style.marginLeft = (100-(div.clientWidth*100/window.innerWidth))/2 + \"vw\";\n  canvas.style.height=\"100%\";\n  canvas.style.width=\"100%\";\n  btns.style.top = (div.clientHeight - btns.clientHeight)*100/window.innerHeight + \"vh\";\n  btns.style.opacity = 0;\n          \n  canvas.addEventListener(\"mouseover\",showButtons, false);\n  btns.addEventListener(\"mouseover\",showButtons, false);\n  canvas.addEventListener(\"mouseout\",hideButtons,false);\n\n  document.getElementById(\"container\").style.paddingTop = \"2vh\";\n\n}\n\nfunction showSidePanel(el){\n  el.props.setHideSidePanel(false);\n  document.getElementById(\"WebcamStream_Wrapper\").style.width = \"55vw\";\n  let btns = document.getElementById(\"buttons\");\n  let div = document.getElementById(\"canvasDiv\");\n  let canvas = document.getElementById(\"canvasPreview\");\n  div.style.width = el.canvasWidth+ \"vw\";\n  div.style.height = el.canvasHeight + \"vw\";\n  canvas.style.width=\"100%\";\n  canvas.style.height=\"100%\";\n  div.style.marginLeft = \"2.5vw\";\n  div.style.marginRight = \"2.5vw\";\n  btns.style.width = \"50vw\";\n  btns.style.top = el.canvasHeight + \"vw\";\n  btns.style.opacity = 1;\n  canvas.removeEventListener(\"mouseover\",showButtons,false);\n\tbtns.removeEventListener(\"mouseover\",showButtons,false);\n\tcanvas.removeEventListener(\"mouseout\",hideButtons,false);\n  setTimeout(function(){\n  if(document.getElementById(\"countdownFromInput\")){\n    document.getElementById(\"countdownFromInput\").value = el.props.countdownFrom;\n    listDevices();\n    }},100);\n  document.getElementById(\"container\").style.paddingTop = \"4vh\";\n}\nfunction showButtons(){\n\tvar btns= document.getElementById(\"buttons\");\n  if(btns){\tbtns.style.opacity=0.7;}\n}\n\nfunction hideButtons(){\n\tvar btns= document.getElementById(\"buttons\");\n  if(btns){btns.style.opacity=0;}\n}\n\nconst ModalError = (props) => {\n  const {\n    className\n  } = props;\n\n  const [modal, setModal] = useState(false);\n\n  const toggle = () => setModal(!modal);\n\n  return (\n    <div>\n      <div id='modalBtn' className='button' onClick={toggle}>Error</div>\n      <Modal isOpen={modal} toggle={toggle} className={className}>\n        <ModalHeader toggle={toggle}>Reporte de errores</ModalHeader>\n        <ModalBody>\n\t\t\t\t\t<p>¿Qué pasó?</p>\n        \t<textarea id='ErrorBox' cols=\"40\" rows=\"3\"></textarea>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={getSysDetails}>Descargar</Button>\n          <Button color=\"secondary\" onClick={toggle}>Cerrar</Button>\n        </ModalFooter>\n      </Modal>\n    </div>\n  );\n}\nexport default SidePanel;\n"]},"metadata":{},"sourceType":"module"}