{"ast":null,"code":"var _jsxFileName = \"/home/paula/Documents/Practica/git/user_interface/src/components/InferenceUI/InferenceUI.js\";\nimport './InferenceUI.css';\nimport { Container } from 'reactstrap';\nimport React from 'react'; //import io from 'socket.io-client';\n\nimport WebcamStream from './WebcamStream.js';\nimport Screenshots from './Screenshots.js';\nimport Diagnosis from './Diagnosis.js';\nimport ElementsMain from './ElementsMain.js';\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\n\nclass InferenceUI extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: \"SelectingSource\",\n      textMainBtn: \"Start\",\n      showStartBtn: false,\n      showCaptureBtn: false,\n      showVideoSelect: false,\n      showProgressBar: false,\n      enabledModalScreenshots: false,\n      //if requested\n      showModalDiagnosis: false,\n      disableBtnCapture: false,\n      streaming: false,\n      almostStreaming: false,\n      timeStartPressed: 0,\n      triggerCaptureScreenshot: false,\n      showAlert: false\n    };\n    this.childScreenshots = React.createRef();\n    this.childWebcamStream = React.createRef();\n    this.countdownFrom = 1;\n  }\n\n  async handler(nextState) {\n    await this.setState({\n      current: nextState\n    });\n    console.log(\"estado en switch: \" + this.state.current);\n    await this.setState(manageStates(this.state.current));\n  }\n\n  captureScreenshot() {\n    this.childScreenshots.current.captureScreenshot();\n  }\n\n  mirrorPreview() {\n    this.childWebcamStream.current.mirror();\n  }\n\n  tempAlert() {\n    let timeout;\n\n    if (this.state.showAlert) {\n      //repeat alert\n      clearTimeout(timeout);\n      timeout = setTimeout(() => {\n        this.setState({\n          showAlert: false\n        });\n      }, 5000);\n    } else {\n      this.setState({\n        showAlert: true\n      });\n      timeout = setTimeout(() => {\n        this.setState({\n          showAlert: false\n        });\n      }, 5000);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      id: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(WebcamStream, {\n      id: \"WebcamStream\",\n      currentState: this.state,\n      handler: nextState => this.handler(nextState),\n      countdownFrom: this.countdownFrom,\n      ref: this.childWebcamStream,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(ElementsMain, {\n      currentState: this.state,\n      handler: nextState => this.handler(nextState),\n      captureScreenshot: () => this.captureScreenshot(),\n      tempAlert: () => this.tempAlert(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Screenshots, {\n      currentState: this.state,\n      handler: nextState => this.handler(nextState),\n      ref: this.childScreenshots,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Diagnosis, {\n      currentState: this.state,\n      handler: nextState => this.handler(nextState),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }));\n  }\n\n}\n\nfunction manageStates(state) {\n  var flags = {};\n\n  switch (state) {\n    case 'OnConnection':\n      flags = {\n        textMainBtn: \"Start\",\n        showStartBtn: true,\n        showCaptureBtn: true,\n        showProgressBar: false,\n        enabledModalScreenshots: true,\n        //if requested\n        showModalDiagnosis: false,\n        disableBtnCapture: false,\n        streaming: false,\n        almostStreaming: false\n      };\n      break;\n\n    case 'Countdown':\n      flags = {\n        textMainBtn: \"Stop\",\n        showStartBtn: true,\n        showCaptureBtn: true,\n        showProgressBar: true,\n        enabledModalScreenshots: false,\n        //if requested\n        showModalDiagnosis: false,\n        disableBtnCapture: true,\n        streaming: false,\n        almostStreaming: true,\n        timeStartPressed: Date.now()\n      };\n      break;\n\n    case 'Streaming':\n      flags = {\n        textMainBtn: \"Stop\",\n        showStartBtn: true,\n        showCaptureBtn: true,\n        showProgressBar: true,\n        enabledModalScreenshots: false,\n        //if requested\n        showModalDiagnosis: false,\n        disableBtnCapture: false,\n        streaming: true,\n        almostStreaming: false\n      };\n      break;\n\n    case 'StopStream':\n      flags = {\n        textMainBtn: \"Start\",\n        showStartBtn: true,\n        showCaptureBtn: true,\n        showProgressBar: true,\n        enabledModalScreenshots: true,\n        //if requested\n        showModalDiagnosis: true,\n        disableBtnCapture: false,\n        streaming: false,\n        almostStreaming: false\n      };\n      break;\n\n    default:\n      console.log('State not defined');\n  }\n\n  return flags;\n}\n\nexport default InferenceUI;","map":{"version":3,"sources":["/home/paula/Documents/Practica/git/user_interface/src/components/InferenceUI/InferenceUI.js"],"names":["Container","React","WebcamStream","Screenshots","Diagnosis","ElementsMain","InferenceUI","Component","constructor","props","state","current","textMainBtn","showStartBtn","showCaptureBtn","showVideoSelect","showProgressBar","enabledModalScreenshots","showModalDiagnosis","disableBtnCapture","streaming","almostStreaming","timeStartPressed","triggerCaptureScreenshot","showAlert","childScreenshots","createRef","childWebcamStream","countdownFrom","handler","nextState","setState","console","log","manageStates","captureScreenshot","mirrorPreview","mirror","tempAlert","timeout","clearTimeout","setTimeout","render","flags","Date","now"],"mappings":"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","sourcesContent":["import './InferenceUI.css';\nimport {Container, \n    } from 'reactstrap';\nimport React from 'react';\n//import io from 'socket.io-client';\nimport WebcamStream from './WebcamStream.js'\nimport Screenshots from './Screenshots.js'\nimport Diagnosis from './Diagnosis.js'\nimport ElementsMain from './ElementsMain.js'\n\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\n\n\n\nclass InferenceUI extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n      \t\tcurrent: \"SelectingSource\",\n\n\t\t\t\t\ttextMainBtn: \"Start\",\n\t\t\t\t\tshowStartBtn: false,\n\t\t\t\t\tshowCaptureBtn: false,\n\t\t\t\t\tshowVideoSelect: false,\n\t\t\t\t\tshowProgressBar: false,\n\t\t\t\t\tenabledModalScreenshots: false, //if requested\n\t\t\t\t\tshowModalDiagnosis: false,\n\t\t\t\t\tdisableBtnCapture: false,\n\n          streaming: false,\n          almostStreaming: false,          \n\n\t\t\t\t\ttimeStartPressed: 0,\n\n\t\t\t\t\ttriggerCaptureScreenshot: false,\n          showAlert: false\n        }\n\t\t\tthis.childScreenshots = React.createRef();\n\t\t\tthis.childWebcamStream = React.createRef();\n\t\t\tthis.countdownFrom = 1;\n    }\n\n\t\tasync handler(nextState){\n\t\t\tawait this.setState({current: nextState});\n\t\t  console.log(\"estado en switch: \" + this.state.current);\n      await this.setState(manageStates(this.state.current));\n\t\t}\n\n\t\tcaptureScreenshot(){\n\t\t\tthis.childScreenshots.current.captureScreenshot();\n\t\t}\n\n    mirrorPreview(){\n      this.childWebcamStream.current.mirror();\n    }\n    \n    tempAlert(){\n      let timeout;\n      if(this.state.showAlert){ //repeat alert\n        clearTimeout(timeout);\n        timeout = setTimeout(()=>{this.setState({showAlert: false})}, 5000);\n      }\n      else{\n        this.setState({showAlert: true})\n        timeout = setTimeout(()=>{this.setState({showAlert: false})}, 5000);\n      }\n    }\n\n    render() {\n      return (\n\t\t\t\t\t<Container id=\"container\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<WebcamStream id=\"WebcamStream\" currentState={this.state} handler={(nextState)=>this.handler(nextState)} countdownFrom={this.countdownFrom} ref={this.childWebcamStream}/>\n\t\t\t\t\t\t<ElementsMain currentState={this.state} handler={(nextState)=>this.handler(nextState)} captureScreenshot={()=>this.captureScreenshot()} tempAlert={()=>this.tempAlert()} /> \n\t\t\t\t\t\t<Screenshots currentState={this.state} handler={(nextState)=>this.handler(nextState)} ref={this.childScreenshots} />\n\t\t\t\t\t\t<Diagnosis currentState={this.state} handler={(nextState)=>this.handler(nextState)}/>\n\t\t\t\t  </Container>\n\t\n        );\n        \n    }\n}\n\nfunction manageStates(state){\n\tvar flags = {};\n\tswitch(state){\n\t\tcase 'OnConnection':\n\t\t  flags={\n\t\t\t\t  textMainBtn: \"Start\",\n\t\t\t\t  showStartBtn: true,\n\t\t\t\t  showCaptureBtn: true,\n\t\t\t\t  showProgressBar: false,\n\t\t\t\t  enabledModalScreenshots: true, //if requested\n\t\t\t\t  showModalDiagnosis: false,\n\t\t\t\t  disableBtnCapture: false,\n  \n\t\t\t\t  streaming: false,\n\t\t\t\t  almostStreaming: false,          \n\t\t\t  };\n\t\t\t  break;\n\t\t  case 'Countdown':\n\t\t\t  flags={\n\t\t\t\t  textMainBtn: \"Stop\",\n\t\t\t\t  showStartBtn: true,\n\t\t\t\t  showCaptureBtn: true,\n\t\t\t\t  showProgressBar: true,\n\t\t\t\t  enabledModalScreenshots: false, //if requested\n\t\t\t\t  showModalDiagnosis: false,\n\t\t\t\t  disableBtnCapture: true,\n  \n\t\t\t\t  streaming: false,\n\t\t\t\t  almostStreaming: true,          \n\t\t\t\t  \n\t\t\t\t  timeStartPressed: Date.now()\n\t\t\t\t  };\n\t\t\t\t  break;\n\t\t  case 'Streaming':\n\t\t\t  flags={\n\t\t\t\t  textMainBtn: \"Stop\",\n\t\t\t\t  showStartBtn: true,\n\t\t\t\t  showCaptureBtn: true,\n\t\t\t\t  showProgressBar: true,\n\t\t\t\t  enabledModalScreenshots: false, //if requested\n\t\t\t\t  showModalDiagnosis: false,\n\t\t\t\t  disableBtnCapture: false,\n  \n\t\t\t\t  streaming: true,\n\t\t\t\t  almostStreaming: false,          \n  \n\t\t\t  };\n\t\t\t  break;\n\t\t  case 'StopStream':\n\t\t\t  flags={\n\t\t\t\t  textMainBtn: \"Start\",\n\t\t\t\t  showStartBtn: true,\n\t\t\t\t  showCaptureBtn: true,\n\t\t\t\t  showProgressBar: true,\n\t\t\t\t  enabledModalScreenshots: true, //if requested\n\t\t\t\t  showModalDiagnosis: true,\n\t\t\t\t  disableBtnCapture: false,\n  \n\t\t\t\t  streaming: false,\n\t\t\t\t  almostStreaming: false,          \n\t\t\t  };\n\t\t\t  break;\n\t\t  default:\n\t\t\t  console.log('State not defined');\n  \n\t  }\n\treturn flags;\n  }\nexport default InferenceUI;\n"]},"metadata":{},"sourceType":"module"}